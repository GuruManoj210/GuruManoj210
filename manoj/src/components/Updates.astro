---
import Section from './Section';
import { getCollection } from 'astro:content';
const updates = await getCollection('updates');
---
<Section client:visible id="updates" title="Updates">
  <div class="grid gap-4">
    {updates.length > 0 ? updates.map(u => (
      <a class="card p-5 block hover:bg-white/70 dark:hover:bg-white/10 transition" href={`/updates/${u.slug}`}>
        <h3 class="font-semibold">{u.data.title}</h3>
        <p class="text-sm opacity-70">{new Date(u.data.date).toLocaleDateString('en-IN', { year: 'numeric', month: 'short', day: '2-digit' })}</p>
        {u.data.summary && <p class="mt-2 opacity-90">{u.data.summary}</p>}
      </a>
    )) : (
      <div class="card p-6 opacity-80">Add markdown files under <code>src/content/updates</code>.</div>
    )}
  </div>
</Section>
