---
import Section from './Section';
import { getCollection } from 'astro:content';
const events = (await getCollection('events')).sort((a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime());
---
<Section client:visible id="events" title="Events">
  <div class="grid gap-4">
    {events.length > 0 ? events.map(e => (
      <a class="card p-5 block hover:bg-white/70 dark:hover:bg-white/10 transition" href={`/events/${e.slug}`}>
        <h3 class="font-semibold">{e.data.title}</h3>
        <p class="text-sm opacity-70">{new Date(e.data.date).toLocaleDateString('en-IN', { year: 'numeric', month: 'short', day: '2-digit' })}{e.data.location ? ` Â· ${e.data.location}` : ''}</p>
        {e.data.summary && <p class="mt-2 opacity-90">{e.data.summary}</p>}
      </a>
    )) : (
      <div class="card p-6 opacity-80">Add markdown files under <code>src/content/events</code>.</div>
    )}
  </div>
</Section>
