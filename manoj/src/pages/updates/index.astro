---
import BaseLayout from '@layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const updates = (await getCollection('updates')).sort((a, b) => 
  new Date(b.data.date).getTime() - new Date(a.data.date).getTime()
);
---
<BaseLayout>
  <div class="container py-24 sm:py-32">
    <div class="max-w-4xl mx-auto">
      <h1 class="text-3xl sm:text-4xl md:text-5xl font-extrabold text-gray-900 dark:text-white mb-8" style="letter-spacing: -0.03em;">
        All Updates
      </h1>
      
      {updates.length > 0 ? (
        <div class="grid gap-4 sm:gap-6">
          {updates.map((update) => (
            <a 
              href={`/updates/${update.slug}`}
              class="card p-5 sm:p-6 block hover:bg-white/80 dark:hover:bg-white/10 hover:scale-[1.01] transition-all group"
            >
              <h2 class="text-xl sm:text-2xl font-bold text-gray-900 dark:text-white group-hover:text-gray-700 dark:group-hover:text-gray-300 transition">
                ğŸ“¡ {update.data.title}
              </h2>
              <p class="text-sm sm:text-base opacity-70 mt-2">
                ğŸ“… {new Date(update.data.date).toLocaleDateString('en-IN', { 
                  year: 'numeric', 
                  month: 'long', 
                  day: 'numeric' 
                })}
              </p>
              {update.data.summary && (
                <p class="mt-3 opacity-90 leading-relaxed">{update.data.summary}</p>
              )}
            </a>
          ))}
        </div>
      ) : (
        <div class="card p-8 text-center">
          <div class="text-5xl mb-4">ğŸ“¢</div>
          <p class="text-lg opacity-80">No updates yet. Check back soon!</p>
        </div>
      )}
      
      <div class="mt-8 text-center">
        <a 
          href="/#updates" 
          class="inline-flex items-center gap-2 px-6 py-3 rounded-lg border-2 border-gray-700 dark:border-gray-300 text-gray-700 dark:text-gray-300 font-medium hover:bg-gray-700 hover:text-white dark:hover:bg-gray-300 dark:hover:text-gray-900 hover:shadow-lg transition-all"
        >
          â† Back to Home
        </a>
      </div>
    </div>
  </div>
</BaseLayout>
